(()=>{"use strict";const t=JSON.parse('{"uq":[[0,-80,"4-H PART",150],[0,80,"SciBorgs",150]],"Df":[[0,400,"GitHub",80,"https://github.com/frc4061"],[0,600,"Robot Demo",80,"https://youtube.com/watch?v=dQw4w9WgXcQ"]],"Wc":[[0,0,"icon.png",1],[-1000,0,"a.jpg",1],[1000,0,"b.jpg",1],[0,-500,"c.jpg",1]]}');class s{x;y;constructor(t,s){this.x=t,this.y=s}static get ZERO(){return new s(0,0)}}class e{pos;content;scale;ctx;cam;robot;size;constructor(t,e,i,h,o,n){this.pos=t,this.content=new Image,this.content.src=`assets/${e}`,this.scale=i,this.ctx=h,this.cam=o,this.robot=n,this.size=s.ZERO,this.content.onload=()=>{this.size=new s(this.content.width*this.scale,this.content.height*this.scale)}}draw(){const t=this.robot.getPosition(),{bounds:s}=this;this.ctx.globalAlpha=t.y>s.top&&t.y<s.bottom&&t.x>s.left&&t.x<s.right?.8:.5,this.ctx.drawImage(this.content,0,0,this.content.width,this.content.height,this.pos.x-this.cam.x-this.size.x/2,this.pos.y-this.cam.y-this.size.y/2,this.content.width*this.scale,this.content.height*this.scale),this.ctx.globalAlpha=1}get bounds(){return{top:this.pos.y-this.size.y/2,bottom:this.pos.y+this.size.y/2,left:this.pos.x-this.size.x/2,right:this.pos.x+this.size.x/2}}}class i{pos;content;fontSize;color;ctx;cam;robot;size;constructor(t,e,i,h,o,n,c){this.pos=t,this.content=e,this.fontSize=i,this.color=c??"#1358bf",this.ctx=h,this.cam=o,this.robot=n,this.ctx.font=`${this.fontSize}px Rubik Mono One`;const a=this.ctx.measureText(this.content);this.size=new s(a.width,a.actualBoundingBoxAscent+a.actualBoundingBoxDescent)}draw(){const t=this.robot.getPosition(),{bounds:s}=this;this.ctx.globalAlpha=t.y>s.top&&t.y<s.bottom&&t.x>s.left&&t.x<s.right?.8:.5,this.ctx.fillStyle=this.color,this.ctx.font=`${this.fontSize}px Rubik Mono One`,this.ctx.fillText(this.content,Math.round(this.pos.x-this.cam.x-this.size.x/2),Math.round(this.pos.y-this.cam.y+this.size.y/2)),this.ctx.globalAlpha=1}get bounds(){return{top:this.pos.y-this.size.y/2,bottom:this.pos.y+this.size.y/2,left:this.pos.x-this.size.x/2,right:this.pos.x+this.size.x/2}}}class h extends i{target;opened;constructor(t,s,e,i,h,o,n){super(t,s,e,h,o,n,"#ff6600"),this.target=i,this.opened=!1}update(){const t=this.robot.getPosition(),{bounds:s}=this;if(t.y>s.top&&t.y<s.bottom&&t.x>s.left&&t.x<s.right){if(!this.opened)return this.opened=!0,window.open(this.target),!0}else this.opened=!1;return!1}}const o=Math.PI/10,n=new s(4e3,2e3),c=document.querySelector("canvas"),a=c.getContext("2d");let r={up:!1,down:!1,left:!1,right:!1};const l=new s(-window.innerWidth/2,-window.innerHeight/2),d=new class{pos;speed;angle;wheelAngle;ctx;cam;constructor(t,e){this.pos=s.ZERO,this.speed=0,this.angle=0,this.wheelAngle=0,this.ctx=t,this.cam=e}turn(t){this.wheelAngle+=t,this.wheelAngle>o?this.wheelAngle=o:this.wheelAngle<-o&&(this.wheelAngle=-o)}accelerate(t){this.speed+=t}getPosition(){return this.pos}update(){this.pos.x+=this.speed*Math.cos(this.angle),this.pos.y+=this.speed*Math.sin(this.angle),this.angle+=this.wheelAngle*this.speed*.02,this.wheelAngle*=.8,this.speed*=.9,this.pos.x>n.x/2?this.pos.x=n.x/2:this.pos.x<-n.x/2&&(this.pos.x=-n.x/2),this.pos.y>n.y/2?this.pos.y=n.y/2:this.pos.y<-n.y/2&&(this.pos.y=-n.y/2)}draw(){this.ctx.beginPath(),this.ctx.lineWidth=4,this.ctx.strokeStyle="#000000",this.ctx.lineJoin="bevel",this.ctx.fillStyle="#aaaaaa",this.ctx.translate(Math.round(this.pos.x-this.cam.x),Math.round(this.pos.y-this.cam.y)),this.ctx.rotate(this.angle),this.ctx.translate(12,-20),this.ctx.rotate(this.wheelAngle),this.ctx.moveTo(-8,0),this.ctx.lineTo(8,0),this.ctx.rotate(-this.wheelAngle),this.ctx.translate(0,40),this.ctx.rotate(this.wheelAngle),this.ctx.moveTo(-8,0),this.ctx.lineTo(8,0),this.ctx.rotate(-this.wheelAngle),this.ctx.translate(-12,-20),this.ctx.moveTo(-20,-20),this.ctx.lineTo(-4,-20),this.ctx.moveTo(-20,20),this.ctx.lineTo(-4,20),this.ctx.fillRect(-20,-15,40,30),this.ctx.strokeRect(-20,-15,40,30),this.ctx.moveTo(5,0),this.ctx.ellipse(0,0,5,5,0,0,2*Math.PI),this.ctx.fillStyle=["#440000","#ff0000"][Math.abs(this.speed)<.5?0:(400,2,Math.floor(Date.now()%800/400))],this.ctx.fill(),this.ctx.stroke(),this.ctx.rotate(-this.angle),this.ctx.translate(-Math.round(this.pos.x-this.cam.x),-Math.round(this.pos.y-this.cam.y))}}(a,l),x=t.uq.map((t=>new i(new s(t[0],t[1]),t[2],t[3],a,l,d))),w=t.Df.map((t=>new h(new s(t[0],t[1]),t[2],t[3],t[4],a,l,d))),p=t.Wc.map((t=>new e(new s(t[0],t[1]),t[2],t[3],a,l,d)));c.width=window.innerWidth,c.height=window.innerHeight,window.addEventListener("resize",(()=>{c.width=window.innerWidth,c.height=window.innerHeight}));const g=()=>{requestAnimationFrame((()=>g())),a.fillStyle="#ffffff",a.fillRect(0,0,c.width,c.height),a.lineWidth=2,a.strokeStyle="#ddddff",a.beginPath();for(let t=Math.round(-l.x%40);t<=c.width;t+=40)a.moveTo(t,0),a.lineTo(t,c.height);for(let t=Math.round(-l.y%40);t<=c.height;t+=40)a.moveTo(0,t),a.lineTo(c.width,t);a.stroke(),r.up&&d.accelerate(.8),r.down&&d.accelerate(-.8),r.left&&d.turn(-.05),r.right&&d.turn(.05),p.forEach((t=>{const{bounds:s}=t;s.top<l.y+c.height&&s.bottom>l.y&&s.left<l.x+c.width/2+c.width/2&&s.right>l.x+c.width/2-c.width/2&&t.draw()})),w.forEach((t=>{const{bounds:s}=t;s.top<l.y+c.height&&s.bottom>l.y&&s.left<l.x+c.width/2+c.width/2&&s.right>l.x+c.width/2-c.width/2&&(t.update()&&(r={up:!1,down:!1,left:!1,right:!1}),t.draw())})),x.forEach((t=>{const{bounds:s}=t;s.top<l.y+c.height&&s.bottom>l.y&&s.left<l.x+c.width/2+c.width/2&&s.right>l.x+c.width/2-c.width/2&&t.draw()})),d.update(),d.draw(),l.x-=.05*(l.x+c.width/2-d.getPosition().x),l.y-=.05*(l.y+c.height/2-d.getPosition().y)},u=(t,s)=>{switch(t.key){case"ArrowUp":case"w":r.up=s;break;case"ArrowDown":case"s":r.down=s;break;case"ArrowLeft":case"a":r.left=s;break;case"ArrowRight":case"d":r.right=s;break;default:return}t.preventDefault()};document.addEventListener("keydown",(t=>u(t,!0))),document.addEventListener("keyup",(t=>u(t,!1))),requestAnimationFrame(g)})();